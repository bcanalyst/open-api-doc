# Midu Open Api Platform

todo：
header code error状态
返回结构体描述
ip做限制

## HOST

https://api.open.midu.com

## 返回数据结构体

```json
{
    "code": 0,
    "message": "",
    "data":{}
}
```

- 每个接口返回的数据都是上述结构。code为0代表请求成功。

## 币列表

### 代币市值排行

```
url: {host}/api/v1/coin/rank
method:GET 
```

**上传参数**

- sort // 0-市值降序，1-市值升序，2-成交量降序，3-成交量升序, 4-成交额降序， 5-成交额升序， 6-换手率降序， 7-换手率升序, 8-价格涨幅排序 ，9-价格跌幅排序
- page // 页码数
- rowsPerPage // 每页条目数

**返回示例**

```
{
    "rowsNumber": 1,
    "list": [
        {
            "rank": 1,      // 排行
            "name": "BTC", // 代币简称
            "key": "bitcoin" // 代币id 
            "price": 123.1, // 价格
            "value": 456.1, // 市值
            "change": 15.1, // 涨跌幅
            "amount": 22222.2, // 成交量
            "kline": [
              {
                "price": 2222.2,
                "timestamp": 1234567890
              }
            ]
        }
    ]
}
```

### 市场行情信息

```
url: {host}/api/v1/coin/info
method:GET 
```

**上传参数**

- coin // 币名

**返回示例**

```
{
    "name": "Bitcoin", // 币名
    "rank": 1, // 排名
    "change24": -1.9377786599262876, // 24小时涨跌幅
    "currentPrice": 3604.6436, // 当前价格
    "circulatingSupply": 17484250, // 流通量
    "totalSupply": 21000000, // 总量
    "volume24h": 2652518891.04488, // 24小时成交量
    "totalValue": 63024489863.299995 // 市场总值
}
```

### 代币市场价格图

```
url: {host}/api/v1/coin/price
method:GET 
```

**上传参数**

- coin // 币名

**返回示例**

```
[
    {
        "price": 3667.5478, // 价格
        "timestamp": 1547078400 // 时间戳
    },
    {
        "price": 3659.5571,
        "timestamp": 1547164800
    },
    {
        "price": 3655.6045,
        "timestamp": 1547251200
    },
    {
        "price": 3551.7041,
        "timestamp": 1547337600
    },
    {
        "price": 3677.9781,
        "timestamp": 1547424000
    },
    {
        "price": 3607.135,
        "timestamp": 1547510400
    },
    {
        "price": 3604.6436,
        "timestamp": 1547596800
    }
]
```

### 代币简介信息

```
url: {host}/api/v1/coin/detail
method:GET 
```

**上传参数**

- coin // 币名

**返回示例**

```
{
    "name": "bitcoin", // 币名
    "cnName": "比特币", // 中文名
    "fullName": "Bitcoin", // 全名
    "icon": "bitcoin.png", // 图标文件名
    "cnSummary": "比特币（BitCoin）的概念最初由中本聪在2009年提出，根据中本聪的思路设计发布的开源软件以及建构其上的P2P网络。比特币是一种P2P形式的数字货币。点对点的传输意味着一个去中心化的支付系统。\n与大多数货币不同，比特币不依靠特定货币机构发行，它依据特定算法，通过大量的计算产生，比特币经济使用整个P2P网络中众多节点构成的分布式数据库来确认并记录所有的交易行为，并使用密码学的设计来确保货币流通各个环节安全性。P2P的去中心化特性与算法本身可以确保无法通过大量制造比特币来人为操控币值。基于密码学的设计可以使比特币只能被真实的拥有者转移或支付。这同样确保了货币所有权与流通交易的匿名性。比特币与其他虚拟货币最大的不同，是其总数量非常有限，具有极强的稀缺性。该货币系统曾在4年内只有不超过1050万个，之后的总数量将被永久限制在2100万个。", // 中文简介
    "enSummary": "The concept of Bitcoin (Bitcoin) was first proposed by Nakamoto in 2009, according to Satoshi Nakamoto's idea of ​​designing open source software and building a P2P network. Bitcoin is a P2P digital currency. Point-to-point transmission means a decentralized payment system. Unlike most currencies, Bitcoin does not rely on specific currency institutions to issue. It is based on specific algorithms and generated by a large number of calculations. The Bitcoin economy uses a distributed database of multiple nodes in the entire P2P network to confirm and record all transactions. And the use of cryptography design to ensure the security of the various aspects of currency circulation. P2P decentralization features and algorithms itself can ensure that can not be manipulated through the large number of bitcoin to manipulate the currency value. The cryptographic design allows bitcoin to be transferred or paid only by the real owner. This also ensures the anonymity of currency ownership and liquidity transactions. The biggest difference between Bitcoin and other virtual currencies is that their total number is very limited and they are extremely scarce. The currency system had no more than 10.5 million in 4 years, and the total amount will be permanently limited to 21 million.", // 英文简介
    "cnCoinType": "加密货币", // 中文货币类型
    "enCoinType": "Cryptocurrency", // 英文货币类型
    "releaseTime": 1230912000, // 发行时间
    "circulatingSupply": 17484250, // 流通量
    "totalSupply": 21000000, // 总量
    "circulatingPrice": 63254175210.275, // 流通市值
    "totalPrice": 75973386300, // 总市值
    "linkList": [
        {
            "url": "https://www.reddit.com/r/bitcoin",
            "platform": "telegram"
        },
        {
            "url": "http://www.bitcoin.org/bitcoin.pdf",
            "platform": "白皮书"
        },
        {
            "url": "https://github.com/bitcoin/bitcoin",
            "platform": "github"
        },
        {
            "url": "https://bitcoin.org/",
            "platform": "官网链接"
        },
        {
            "url": "https://live.blockcypher.com/btc/",
            "platform": "区块浏览器"
        },
        {
            "url": "https://forum.bitcoin.com/",
            "platform": "社区论坛"
        },
        {
            "url": "https://www.reddit.com/r/bitcoin",
            "platform": "reddit"
        }
    ], // 外链
    "symbol": "BTC", // 简称
    "coinICO": {
        "icoStartTime": 0,
        "icoEndTime": 0,
        "icoPrice": 0,
        "icoCnDistribution": "",
        "icoEnDistribution": ""
    } // ico信息
}
```

### 富豪榜

```
url: {host}/api/v1/balance/rank
method:GET 
```

**上传参数**

- page // 页码数（从1开始）
- rowsPerPage // 每页条数
- contract // 有三种选择：btc，eth，合约（erc20合约，例如：0x05f4a42e251f2d52b8ed15e9fedaacfcef1fad27）

**注：目前btc只提供前十名，若contract为btc的话，page和rowsPerPage是选填项**

**返回示例**

btc
```
[
    {
        "rank": 1,
        "address": "0xde5a57b9ba909c332cb7be7133ec29e228fb0286",
        "volume": "3206810811.220588200000000000000000000000"
    }
]
```

eth
```
[
    {
        "rank": 1, // 排名
        "address": "0xde5a57b9ba909c332cb7be7133ec29e228fb0286", // 地址
        "volume": "3206810811.220588200000000000000000000000", // 持有量
        "monthTxnCount": 28, // 30天交易次数
        "proportion": 0.25450879454131653 // 占比
    }
]
```

erc20
```
[
    {
        "rank": 1,
        "address": "0xde5a57b9ba909c332cb7be7133ec29e228fb0286",
        "volume": "3206810811.220588200000000000000000000000",
        "monthTxnCount": 28,
        "proportion": 0.25450879454131653
    }
]
```

### btc地址详情信息

```
url: {host}/api/v1/btc/address_info
method:GET 
```

**上传参数**

- address // 地址

**返回示例**

```
{
    "address": "3D2oetdNuZUqQHPJmcMDDHYoqkyNVsFk9r", // 地址
    "balance": "138660.869751", // 余额
    "outQuantity": 3160859.11268557, // 总发送
    "inQuantity": 3299519.98243679, // 总接收
    "maxQuantity": 0, // 最大额交易
    "maxTransactionHash": "", // 最大额交易哈希
    "outTxnCount": 973, // 总发送交易笔数
    "inTxnCount": 5604, // 总接收交易笔数
    "txnCount": 5602, // 总交易笔数
    "firstTransactionTime": 1483619655, // 第一次交易时间戳
    "lastTransactionTime": 1547626916 // 最后一次交易时间戳
}
```

### eth地址详情信息

```
url: {host}/api/v1/eth/address_info
method:GET 
```

**上传参数**

- address // 地址

**返回示例**

```
{
    "balance": "2033491.7041312056245936160000000000", // 余额
    "firstTransactionTime": 1513586453, // 第一次交易时间戳
    "lastTransactionTime": 1546545718 // 最后一次交易时间戳
}
```

### 活跃度

```
url: {host}/api/v1/coin/active
method:GET 
```

**上传参数**

- contract // 有三种选择：btc，eth，合约（erc20合约，例如：0x05f4a42e251f2d52b8ed15e9fedaacfcef1fad27）

**返回示例**

```
[
    {
        "txnCount": "133398.832736", //交易量
        "newAddressCount": 136, //新增地址
        "activeAddressCount": 944, //活跃地址
        "timestamp": 1545091200 // 时间戳
    },
    {
        "txnCount": "228045.661960",
        "newAddressCount": 143,
        "activeAddressCount": 976,
        "timestamp": 1545177600
    }
]
```

### 最新区块高度

```
url: {host}/api/v1/btc/latest_block_height
method:GET 
```

**返回示例**

```
{
    "result": 560705 // 区块高度
}
```

### 根据区块高度查区块信息

```
url: {host}/api/v1/btc/block
method:GET 
```

**上传参数**

- height // 区块高度

**返回示例**

```
{
    "hash": "0000000000000000000991af7b179071eacd86b4c1e7d05fb8df0790facba842", // 区块hash
    "height": 560598, // 区块高度
    "version": "536870912", // 版本
    "prevHash": "00000000000000000020245866590c618cbf8c145691465df8f5e73295c0b9d2", // 前一个区块的hash
    "merkleRoot": "c8a025098570ac2f8b0f17342763e889b96077bbd3c6bf02477d5de93ed4cb43", // merkle根
    "blockTime": 1548756981, // 报块时间
    "blockBits": "17306835", // 区块比特
    "nonce": "2751944939", // 随机数
    "txnCount": 2174, // 交易总数
    "strippedSize": 911235, // 净大小
    "blockSize": 1259567, // 区块大小
    "blockWeight": 3993272, // 区块重量
    "medianTime": 1548754905, // 播报时间
    "difficulty": "5814661935891.805", // 难度
    "chainWork": "000000000000000000000000000000000000000004e38d4c084777fc011bbbe6", // 总工作量
    "txHashes": [
        "8f044ba37d07f1f3fda5dacce50b32487c6340fc4558d89c3a99480abb696eb5",
        "6683cc365dd01110bc57c2aceb8877539b6414d0278ebc1228fb58cf0009efec"
    ], // 交易hash数组
    "vinCount": 5506, // 转入总量
    "voutCount": 7306, // 转出总量
    "miner": "bc1qjl8uwezzlech723lpnyuza0h2cdkvxvh54v3dn", // 挖矿地址
    "reward": 1275652367 // 奖励
}
```

### 查询交易信息

```
url: {host}/api/v1/btc/txn
method:GET 
```

**上传参数**

- id // 交易hash

**返回示例**

```
{
    "vin": [
        {
            "addresses": [], // 地址
            "value": 0, // 数量
            "coinbase": "03e68d0841d7141108b8fcae41d7141107b732332f4254432e544f502ffabe6d6db76a8cc4d3765fb01a6d0efa5dffe57873ef70f0b71cdda074bc90a37760a5d88000000000000000fa006511ce40000000000000",
            "type": "" // 类型
        }
    ], // 转入方
    "vout": [
        {
            "addresses": [
                "1Hz96kJKF2HLPGY15JWLB5m9qGNxvt8tHJ"
            ],
            "value": 1251685905,
            "type": "pubkeyhash"
        },
        {
            "addresses": [],
            "value": 0,
            "type": "nulldata"
        }
    ],
    "blockHash": "00000000000000000027994fc946f09af421261770f2370070717a0fd6703f8a", // 区块hash
    "blockHeight": 560614, // 区块高度
    "blockTime": 1548764190, // 报块时间
    "txHash": "5b8812e45e3239df7244f61166adfe0773281811a6798b316f77410424793b23", // 交易hash
    "txVersion": 1, // 交易版本
    "lockTime": 0,
    "txWitnessHash": "e1d7cce47511ddc02331c0527266c8e5381c1ed9e140778da96661200a490735", // 交易见证方hash
    "txSize": 253, // 交易大小
    "txVSize": 226, // 交易净大小
    "vinCount": 1, // 转入总量
    "voutCount": 2 // 转出总量
}
```
